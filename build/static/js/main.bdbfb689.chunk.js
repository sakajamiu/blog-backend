(this["webpackJsonpblog-frontend"]=this["webpackJsonpblog-frontend"]||[]).push([[0],{71:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(22),c=n.n(a),s=n(9),o=(n(71),n(7)),i=n(2),l=n(8),u=n.n(l),j=n(11),b=n(21),d=n.n(b),O="/api/blogs",p=null,x=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(O);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:p}},e.next=3,d.a.post(O,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.put("".concat(O,"/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("".concat(O,"/").concat(t.id,"/comments"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g={getAll:x,create:h,update:f,remove:function(){var e=Object(j.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:p}},console.log(t),console.log(n),e.next=5,d.a.delete("".concat(O,"/").concat(t),n);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){p="Bearer ".concat(e)},comment:m},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZE":return t.blogs;case"NEW BLOG":return e.concat(t.data);case"LIKE BLOG":return e.map((function(e){return e.id!==t.data.id?e:t.data}));case"DELETE":return e.filter((function(e){return e.id!==t.data}));case"COMMENT":return e.map((function(e){return e.id!==t.data.id?e:t.data}));default:return e}},y=n(99),w=n(56),k=n(108),U=n(12),C=n(1),I=function(){var e=Object(s.c)((function(e){return e.blog.sort((function(e,t){return t.likes-e.likes}))})),t=Object(s.b)();return Object(r.useEffect)((function(){t(function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getAll();case 2:n=e.sent,t({type:"INITIALIZE",blogs:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]),Object(C.jsx)(y.a,{children:Object(C.jsx)(w.a,{sm:6,children:Object(C.jsxs)("div",{style:{marginTop:"25px"},children:[Object(C.jsx)("h1",{children:"Blogs"}),Object(C.jsx)(k.a,{children:e.map((function(e){return Object(C.jsx)(k.a.Item,{children:Object(C.jsxs)(U.b,{to:"".concat(e.id),children:[e.title," by ",e.author]})},e.id)}))})]})})})},N=n(15),L=n(6),T=n(100),S=function(){var e=Object(L.g)().id,t=Object(s.c)((function(t){return t.blog.find((function(t){return t.id===e}))})),n=Object(s.b)(),a=Object(r.useState)(""),c=Object(o.a)(a,2),l=c[0],b=c[1],d=function(){var e=Object(i.a)(Object(i.a)({},t),{},{comments:t.comments.concat(l)});n(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.comment(e);case 2:n({type:"COMMENT",data:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),b("")},O=function(e){var t;n((t=e,function(){var e=Object(j.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(i.a)(Object(i.a)({},t),{},{likes:t.likes+1}),e.next=3,g.update(r);case 3:n({type:"LIKE BLOG",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))};return t?Object(C.jsxs)("div",{style:{marginTop:"25px"},children:[Object(C.jsxs)("h1",{style:{marginTop:"15px"},children:[t.title," ",t.author]}),Object(C.jsx)("a",{href:t.url,style:{marginTop:"15px"},children:t.url}),Object(C.jsxs)("h5",{style:{marginTop:"15px"},children:[" ",t.likes," likes "," ",Object(C.jsx)(N.f,{style:{color:"blue"},onClick:function(){return O(t)},id:"like"})]}),Object(C.jsxs)("h5",{style:{marginTop:"15px"},children:[" added by ","",t.user.name]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("h5",{children:" Comments "}),Object(C.jsx)("input",{type:"text",value:l,onChange:function(e){return b(e.target.value)}}),Object(C.jsx)(T.a,{onClick:function(){return d()},children:"Add Comment"}),t.comments.length>0?Object(C.jsx)("ul",{children:t.comments.map((function(e){return Object(C.jsx)("li",{children:e},e.id)}))}):Object(C.jsx)("h6",{children:"There is no comment on this blog post"})]})]}):null},E=n(102),B=n(107),A=n(106),G=n(109),R=n(101),D={login:function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LoggedInUser":return window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(t.data)),g.setToken(t.data.token),t.data;case"LoggedUser":return null!==t.loggedInUser&&g.setToken(t.loggedInUser.token),t.loggedInUser;case"NO USER":case"NEW USER":case"LOG OUT":return t.data;default:return e}},F=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(o.a)(c,2),l=i[0],b=i[1],d=Object(r.useState)(!1),O=Object(o.a)(d,2),p=O[0],x=O[1],h=Object(s.b)(),f={display:p?"":"none"},m={display:p?"none":""};return Object(C.jsx)(B.a,{style:{borderRadius:"25px"},className:"loginForm",children:Object(C.jsx)(B.a.Body,{children:Object(C.jsxs)(A.a,{onSubmit:function(e){var t;e.preventDefault(),h((t={username:n,password:l},function(){var e=Object(j.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.login(t);case 2:r=e.sent,n({type:"LoggedInUser",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),a(""),b("")},children:[Object(C.jsxs)(A.a.Group,{className:"formcomponent",controlId:"loginUsername",children:[Object(C.jsx)(A.a.Label,{children:"Username"}),Object(C.jsxs)(G.a,{children:[Object(C.jsx)(G.a.Text,{id:"formIcon",children:Object(C.jsx)(N.a,{})}),Object(C.jsx)(A.a.Control,{type:"text\r ",value:n,placeholder:"enter your username",onChange:function(e){var t=e.target;return a(t.value)}})]})]}),Object(C.jsxs)(A.a.Group,{className:"formcomponent",controlId:"loginPassword",children:[Object(C.jsx)(A.a.Label,{children:"Password"}),Object(C.jsxs)(G.a,{children:[Object(C.jsx)(G.a.Text,{id:"formIcon",children:Object(C.jsx)(N.c,{})}),Object(C.jsx)(A.a.Control,{type:"password",value:l,placeholder:"enter your password",onChange:function(e){var t=e.target;return b(t.value)}})]})]}),Object(C.jsxs)(T.a,{variant:"primary",type:"submit",className:"formcomponent",style:m,id:"loggin-button",onClick:function(){return x(!p)},children:["Log In ",Object(C.jsx)(N.d,{})]}),Object(C.jsxs)(T.a,{style:f,className:"formcomponent",children:[Object(C.jsx)(R.a,{animation:"grow",role:"status"})," "," ","Logging in"]}),Object(C.jsxs)(A.a.Text,{children:["don\u2018t have an account? ",Object(C.jsx)(U.b,{to:"/signup",onClick:function(){return h({type:"NEW USER",data:"newUser"})},id:"formLink",children:"Sign Up"})]})]})})})},W=function(e){var t=Object(r.useState)(""),n=Object(o.a)(t,2),a=n[0],c=n[1];return{type:e,value:a,onChange:function(e){c(e.target.value)}}},J=function(){var e=W("text"),t=W("text"),n=W("text"),r=Object(s.b)(),a=Object(L.f)();return Object(C.jsx)("div",{style:{marginTop:"15px",maxWidth:"800px"},children:Object(C.jsx)("div",{children:Object(C.jsx)(B.a,{style:{borderRadius:"25px"},children:Object(C.jsxs)(B.a.Body,{children:[Object(C.jsx)("h2",{children:" Create Blog"}),Object(C.jsxs)(A.a,{onSubmit:function(c){c.preventDefault();var s={title:e.value,author:t.value,url:n.value};r(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.create(e);case 2:r=t.sent,n({type:"NEW BLOG",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(s)),a("/blogs")},className:"form",children:[Object(C.jsxs)(A.a.Group,{className:"formcomponent",controlId:"blogFormTitle",children:[Object(C.jsx)(A.a.Label,{children:" Title "}),Object(C.jsx)(A.a.Control,Object(i.a)({},e))]}),Object(C.jsxs)(A.a.Group,{className:"formcomponent",controlId:"blogFormAuthor",children:[Object(C.jsx)(A.a.Label,{children:"Author "}),Object(C.jsx)(A.a.Control,Object(i.a)({},t))]}),Object(C.jsxs)(A.a.Group,{className:"formcomponent",controlId:"blogFormUrl",children:[Object(C.jsx)(A.a.Label,{children:"Url"}),Object(C.jsx)(A.a.Control,Object(i.a)({},n))]}),Object(C.jsx)(T.a,{className:"formcomponent",variant:"primary",type:"submit",id:"blogFormCreate",children:" Create "})]})]})})})})},M=n(104),Z=n(105),z=function(e){var t=e.setContainerClassName,n=e.setAppClassName,a=Object(r.useState)(!1),c=Object(o.a)(a,2),i=c[0],l=c[1],u=Object(L.f)(),j=Object(s.b)(),b=Object(s.c)((function(e){return e.loginuser})),d=function(){j((window.localStorage.removeItem("loggedBlogAppUser"),{type:"LOG OUT",data:null})),t("landingPageContainer"),n("landingPage"),l(!1),u("/")};null!==b&&"newUser"!==b&&!1===i&&(l(!0),u("/blogs"));return Object(C.jsx)(M.a,{bg:"primary",variant:"dark",expand:"md",children:Object(C.jsxs)(E.a,{children:[Object(C.jsx)(M.a.Brand,{children:Object(C.jsxs)(U.b,{to:"".concat(!1===i?"/":"blogs"),style:{color:"white",textDecoration:"none"},children:[Object(C.jsx)(N.b,{})," ","Blog"]})}),Object(C.jsx)(M.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(C.jsxs)(M.a.Collapse,{id:"basic-navbar-nav",children:[Object(C.jsxs)(Z.a,{className:"me-auto",children:[null!==b&&"newUser"!==b?Object(C.jsx)(M.a.Brand,{children:Object(C.jsx)(U.b,{to:"/users",style:{color:"white",textDecoration:"none",paddingLeft:"25px"},children:"Users"})}):null,null!==b&&"newUser"!==b?Object(C.jsx)(M.a.Brand,{children:Object(C.jsx)(U.b,{to:"/createBlog",style:{color:"white",textDecoration:"none",paddingLeft:"25px"},children:"Create Blog"})}):null]}),Object(C.jsxs)(Z.a,{className:"justify-content-end",children:[null===b?Object(C.jsx)(U.b,{to:"/signup",style:{color:"white",textDecoration:"none"},onClick:function(){return j({type:"NEW USER",data:"newUser"})},children:"Sign Up"}):"newUser"===b?Object(C.jsx)(U.b,{to:"/",style:{color:"white",textDecoration:"none"},onClick:function(){return j({type:"NO USER",data:null})},children:"Log In"}):Object(C.jsxs)(M.a.Brand,{children:[Object(C.jsx)(N.g,{})," ","  ",b.username]}),null!==b&&"newUser"!==b?Object(C.jsxs)(T.a,{variant:"danger",onClick:function(){return d()},children:["Log Out ",Object(C.jsx)(N.e,{})]}):null]})]})]})})},K=function(){return Object(C.jsx)(M.a,{bg:"primary",variant:"dark",fixed:"bottom",expand:"md",children:Object(C.jsxs)(E.a,{children:[Object(C.jsxs)(M.a.Brand,{children:[Object(C.jsx)(N.b,{})," ","Blog"]}),Object(C.jsx)(M.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(C.jsxs)(M.a.Collapse,{className:"justify-content-end",children:[Object(C.jsx)(Z.a.Link,{style:{color:"white"},children:"About"}),Object(C.jsx)(Z.a.Link,{style:{color:"white"},children:"Legal"}),Object(C.jsx)(Z.a.Link,{style:{color:"white"},children:"Contact"})]})]})})},q="/api/users",H={register:function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post(q,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAll:function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(q);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER INITIALIZE":return t.Users;case"Register":return t.data;default:return e}},V=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(o.a)(c,2),l=i[0],b=i[1],d=Object(r.useState)(""),O=Object(o.a)(d,2),p=O[0],x=O[1],h=Object(s.b)();return Object(C.jsx)(B.a,{style:{borderRadius:"25px"},className:"signUpForm",children:Object(C.jsx)(B.a.Body,{children:Object(C.jsxs)(A.a,{onSubmit:function(e){var t;e.preventDefault(),h((t={username:n,name:l,password:p},function(){var e=Object(j.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.register(t);case 2:r=e.sent,n({type:"Register",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),a(""),b(""),x(""),h({type:"NO USER",data:null})},children:[Object(C.jsxs)(A.a.Group,{className:"formcomponent",children:[Object(C.jsx)(A.a.Label,{children:" Username"}),Object(C.jsxs)(G.a,{children:[Object(C.jsx)(G.a.Text,{id:"formIcon",children:Object(C.jsx)(N.a,{})}),Object(C.jsx)(A.a.Control,{type:"text",value:n,placeholder:"enter your username",onChange:function(e){var t=e.target;return a(t.value)}})]}),Object(C.jsx)(A.a.Text,{children:"we recommend using your nickname and atleast 3 characters"})]}),Object(C.jsxs)(A.a.Group,{className:"formcomponent",children:[Object(C.jsx)(A.a.Label,{children:"Name"}),Object(C.jsxs)(G.a,{children:[Object(C.jsx)(G.a.Text,{id:"formIcon",children:Object(C.jsx)(N.g,{})}),Object(C.jsx)(A.a.Control,{type:"text",value:l,placeholder:"enter your name",onChange:function(e){var t=e.target;return b(t.value)}})]})]}),Object(C.jsxs)(A.a.Group,{className:"formcomponent",children:[Object(C.jsx)(A.a.Label,{children:"Password"}),Object(C.jsxs)(G.a,{children:[Object(C.jsx)(G.a.Text,{id:"formIcon",children:Object(C.jsx)(N.c,{})}),Object(C.jsx)(A.a.Control,{type:"password",value:p,placeholder:"enter your password",onChange:function(e){var t=e.target;return x(t.value)}})]}),Object(C.jsx)(A.a.Text,{children:"password should be at least 4 characters"})]}),Object(C.jsx)(T.a,{variant:"primary",type:"submit",className:"formcomponent",children:"Sign Up"}),Object(C.jsxs)(A.a.Text,{children:["Already have an account? ",Object(C.jsx)(U.b,{to:"/",id:"formLink",onClick:function(){return h({type:"NO USER",data:null})},children:"Log In"})]})]})})})},X=n(103),Y=function(){var e=Object(s.c)((function(e){return e.users.sort((function(e,t){return t.blogs.length-e.blogs.length}))})),t=Object(s.b)();return Object(r.useEffect)((function(){t(function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.getAll();case 2:n=e.sent,t({type:"USER INITIALIZE",Users:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]),Object(C.jsxs)(X.a,{striped:!0,bordered:!0,style:{marginTop:"25px"},children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"Users"}),Object(C.jsx)("th",{children:"Blogs Created"})]})}),Object(C.jsx)("tbody",{children:e.map((function(e){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:Object(C.jsx)(U.b,{to:"".concat(e.id),style:{textDecoration:"none"},children:e.name})}),Object(C.jsx)("td",{children:e.blogs.length})]},e.id)}))})]})},$=function(){var e=Object(L.g)().id,t=Object(s.c)((function(t){return t.users.find((function(t){return t.id===e}))}));return t?Object(C.jsxs)("div",{style:{marginTop:"25px"},children:[Object(C.jsx)("h1",{children:t.name}),Object(C.jsx)("h4",{children:"added blogs"}),t.blogs.length>0?Object(C.jsx)("ul",{children:t.blogs.map((function(e){return Object(C.jsx)("li",{children:e.title},e.id)}))}):Object(C.jsx)("h6",{children:" user is yet to add a blog"})]}):null},_=function(){var e=Object(r.useState)("landingPage"),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)("landingPageContainer"),i=Object(o.a)(c,2),l=i[0],u=i[1],j=Object(s.b)();Object(r.useEffect)((function(){j(function(){var e=window.localStorage.getItem("loggedBlogAppUser");return{type:"LoggedUser",loggedInUser:JSON.parse(e)}}())}),[j]);var b=Object(s.c)((function(e){return e.loginuser}));return null!==b&&"newUser"!==b&&""!==l&&(a("dashboard"),u("")),Object(C.jsxs)("div",{className:n,children:[Object(C.jsxs)(U.a,{children:[Object(C.jsx)(z,{setContainerClassName:u,setAppClassName:a}),Object(C.jsx)(E.a,{className:l,children:Object(C.jsxs)(L.c,{children:[Object(C.jsx)(L.a,{path:"/",element:Object(C.jsx)(F,{})}),Object(C.jsx)(L.a,{path:"/signUp",element:Object(C.jsx)(V,{})}),Object(C.jsx)(L.a,{path:"/blogs",element:Object(C.jsx)(I,{})}),Object(C.jsx)(L.a,{path:"/users",element:Object(C.jsx)(Y,{})}),Object(C.jsx)(L.a,{path:"/createBlog",element:Object(C.jsx)(J,{})}),Object(C.jsx)(L.a,{path:"/users/:id",element:Object(C.jsx)($,{})}),Object(C.jsx)(L.a,{path:"/blogs/:id",element:Object(C.jsx)(S,{})})]})})]}),Object(C.jsx)(K,{})]})},ee=(n(96),n(39)),te=n(61),ne=Object(ee.b)({blog:v,loginuser:P,users:Q}),re=Object(ee.c)(ne,Object(ee.a)(te.a));c.a.render(Object(C.jsx)(s.a,{store:re,children:Object(C.jsx)(_,{})}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.bdbfb689.chunk.js.map