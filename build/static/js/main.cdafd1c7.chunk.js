(this["webpackJsonpblog-frontend"]=this["webpackJsonpblog-frontend"]||[]).push([[0],{48:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),s=n.n(c),o=(n(48),n(7)),i=n.n(o),l=n(11),u=n(6),j=n(15),b=n.n(j),d="/api/blogs",p=null,h={getAll:function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(d);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:p}},e.next=3,b.a.post(d,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat(d,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:p}},console.log(n),e.next=4,b.a.delete("".concat(d,"/").concat(t),n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){p="Bearer ".concat(e)}},x=n(78),O=n(12),f=n(1),m=function(e){var t=e.blog,n=e.updateLikes,a=e.deleteBlogs,c=Object(r.useState)(!1),s=Object(u.a)(c,2),o=s[0],i=s[1],l={display:o?"":"none"};return Object(f.jsxs)("div",{className:"blog",children:[Object(f.jsxs)("div",{className:"blogHeader",children:[t.title," ",t.author," ",Object(f.jsx)(x.a,{onClick:function(){return i(!o)},children:o?"hide":"view"})]}),Object(f.jsxs)("div",{style:l,className:"blogDetails",children:[Object(f.jsx)("a",{href:t.url,children:t.url}),Object(f.jsxs)("p",{children:[" ",Object(f.jsx)(O.e,{style:{color:"blue"},onClick:n,id:"like"})," ",t.likes]}),Object(f.jsx)("p",{children:t.user.name}),Object(f.jsx)(x.a,{variant:"danger",onClick:a,children:"remove "})]})]})},v=n(80),g=n(84),y=n(83),w=n(85),k=n(79),C=function(e){var t=e.handleLogin,n=e.setUser,a=e.loadingVisible,c=e.setLoadingVisible,s=Object(r.useState)(""),o=Object(u.a)(s,2),i=o[0],l=o[1],j=Object(r.useState)(""),b=Object(u.a)(j,2),d=b[0],p=b[1],h={display:a?"":"none"},m={display:a?"none":""};return Object(f.jsx)(g.a,{style:{borderRadius:"25px"},className:"loginForm",children:Object(f.jsx)(g.a.Body,{children:Object(f.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),c(!0),t({username:i,password:d}),l(""),p("")},children:[Object(f.jsxs)(y.a.Group,{className:"formcomponent",controlId:"loginUsername",children:[Object(f.jsx)(y.a.Label,{children:"Username"}),Object(f.jsxs)(w.a,{children:[Object(f.jsx)(w.a.Text,{id:"formIcon",children:Object(f.jsx)(O.a,{})}),Object(f.jsx)(y.a.Control,{type:"text ",value:i,placeholder:"enter your username",onChange:function(e){var t=e.target;return l(t.value)}})]})]}),Object(f.jsxs)(y.a.Group,{className:"formcomponent",controlId:"loginPassword",children:[Object(f.jsx)(y.a.Label,{children:"Password"}),Object(f.jsxs)(w.a,{children:[Object(f.jsx)(w.a.Text,{id:"formIcon",children:Object(f.jsx)(O.c,{})}),Object(f.jsx)(y.a.Control,{type:"password",value:d,placeholder:"enter your password",onChange:function(e){var t=e.target;return p(t.value)}})]})]}),Object(f.jsxs)(x.a,{variant:"primary",type:"submit",className:"formcomponent",style:m,id:"loggin-button",children:["Log In ",Object(f.jsx)(O.d,{})]}),Object(f.jsxs)(x.a,{style:h,className:"formcomponent",children:[Object(f.jsx)(k.a,{animation:"grow",role:"status"})," "," ","Logging in"]}),Object(f.jsxs)(y.a.Text,{children:["don\u2018t have an account? ",Object(f.jsx)("a",{href:"#lo",onClick:function(){return n("newUser")},id:"formLink",children:"Sign Up"})]})]})})})},N={login:function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(e){var t=e.notificationMessage,n=e.notificationClassName;return Object(f.jsx)("div",{className:n,children:Object(f.jsx)("p",{children:t})})},L=function(e){var t=e.handleCreateBlog,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(""),i=Object(u.a)(o,2),l=i[0],j=i[1],b=Object(r.useState)(""),d=Object(u.a)(b,2),p=d[0],h=d[1],O=Object(r.useState)(!1),m=Object(u.a)(O,2),v=m[0],w=m[1],k={display:v?"none":""},C={display:v?"":"none"};return Object(f.jsxs)("div",{children:[Object(f.jsx)(x.a,{style:k,onClick:function(){return w(!0)},children:"create new blog"}),Object(f.jsx)("div",{style:C,children:Object(f.jsx)(g.a,{style:{borderRadius:"25px"},children:Object(f.jsxs)(g.a.Body,{children:[Object(f.jsx)("h2",{children:" Create Blog"}),Object(f.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),w(!1),t({title:c,author:l,url:p}),s(""),j(""),h("")},className:"form",children:[Object(f.jsxs)(y.a.Group,{className:"formcomponent",controlId:"blogFormTitle",children:[Object(f.jsx)(y.a.Label,{children:" Title "}),Object(f.jsx)(y.a.Control,{type:"text",placeholder:"enter the blog title",value:c,onChange:function(e){var t=e.target;return s(t.value)}})]}),Object(f.jsxs)(y.a.Group,{className:"formcomponent",controlId:"blogFormAuthor",children:[Object(f.jsx)(y.a.Label,{children:"Author "}),Object(f.jsx)(y.a.Control,{type:"text",placeholder:"enter the author name",value:l,onChange:function(e){var t=e.target;return j(t.value)}})]}),Object(f.jsxs)(y.a.Group,{className:"formcomponent",controlId:"blogFormUrl",children:[Object(f.jsx)(y.a.Label,{children:"Url"}),Object(f.jsx)(y.a.Control,{type:"text",placeholder:"enter the blog url",value:p,onChange:function(e){var t=e.target;return h(t.value)}})]}),Object(f.jsx)(x.a,{className:"formcomponent",variant:"primary",type:"submit",id:"blogFormCreate",children:" Create "}),Object(f.jsx)(x.a,{onClick:function(){return w(!1)},children:"cancel"})]})]})})})]})},U=n(82),T=n(81),B=function(e){var t=e.user,n=e.setUser;return Object(f.jsx)(T.a,{bg:"primary",variant:"dark",expand:"md",children:Object(f.jsxs)(v.a,{children:[Object(f.jsxs)(T.a.Brand,{children:[Object(f.jsx)(O.b,{})," ","Blog"]}),Object(f.jsx)(T.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(f.jsx)(T.a.Collapse,{className:"justify-content-end",id:"basic-navbar-nav",children:null===t?Object(f.jsx)(U.a.Link,{style:{color:"white"},onClick:function(){return n("newUser")},children:"Sign Up"}):"newUser"===t?Object(f.jsx)(U.a.Link,{style:{color:"white"},onClick:function(){return n(null)},children:"Log In"}):Object(f.jsxs)(T.a.Brand,{children:[Object(f.jsx)(O.f,{})," ","  ",t.username]})})]})})},I=function(){return Object(f.jsx)(T.a,{bg:"primary",variant:"dark",fixed:"bottom",expand:"md",children:Object(f.jsxs)(v.a,{children:[Object(f.jsxs)(T.a.Brand,{children:[Object(f.jsx)(O.b,{})," ","Blog"]}),Object(f.jsx)(T.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(f.jsxs)(T.a.Collapse,{className:"justify-content-end",children:[Object(f.jsx)(U.a.Link,{style:{color:"white"},children:"About"}),Object(f.jsx)(U.a.Link,{style:{color:"white"},children:"Legal"}),Object(f.jsx)(U.a.Link,{style:{color:"white"},children:"Contact"})]})]})})},A=function(e){var t=e.createUser,n=e.setUser,a=Object(r.useState)(""),c=Object(u.a)(a,2),s=c[0],o=c[1],i=Object(r.useState)(""),l=Object(u.a)(i,2),j=l[0],b=l[1],d=Object(r.useState)(""),p=Object(u.a)(d,2),h=p[0],m=p[1];return Object(f.jsx)(g.a,{style:{borderRadius:"25px"},className:"signUpForm",children:Object(f.jsx)(g.a.Body,{children:Object(f.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),t({username:s,name:j,password:h}),o(""),b(""),m("")},children:[Object(f.jsxs)(y.a.Group,{className:"formcomponent",children:[Object(f.jsx)(y.a.Label,{children:" Username"}),Object(f.jsxs)(w.a,{children:[Object(f.jsx)(w.a.Text,{id:"formIcon",children:Object(f.jsx)(O.a,{})}),Object(f.jsx)(y.a.Control,{type:"text",value:s,placeholder:"enter your username",onChange:function(e){var t=e.target;return o(t.value)}})]}),Object(f.jsx)(y.a.Text,{children:"we recommend using your nickname and atleast 3 characters"})]}),Object(f.jsxs)(y.a.Group,{className:"formcomponent",children:[Object(f.jsx)(y.a.Label,{children:"Name"}),Object(f.jsxs)(w.a,{children:[Object(f.jsx)(w.a.Text,{id:"formIcon",children:Object(f.jsx)(O.f,{})}),Object(f.jsx)(y.a.Control,{type:"text",value:j,placeholder:"enter your name",onChange:function(e){var t=e.target;return b(t.value)}})]})]}),Object(f.jsxs)(y.a.Group,{className:"formcomponent",children:[Object(f.jsx)(y.a.Label,{children:"Password"}),Object(f.jsxs)(w.a,{children:[Object(f.jsx)(w.a.Text,{id:"formIcon",children:Object(f.jsx)(O.c,{})}),Object(f.jsx)(y.a.Control,{type:"password",value:h,placeholder:"enter your password",onChange:function(e){var t=e.target;return m(t.value)}})]}),Object(f.jsx)(y.a.Text,{children:"password should be at least 4 characters"})]}),Object(f.jsx)(x.a,{variant:"primary",type:"submit",className:"formcomponent",children:"Sign Up"}),Object(f.jsxs)(y.a.Text,{children:["Already have an account? ",Object(f.jsx)("a",{href:"#2",id:"formLink",onClick:function(){return n(null)},children:"Log In"})]})]})})})},G={register:function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=function(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(u.a)(c,2),o=s[0],j=s[1],b=Object(r.useState)(null),d=Object(u.a)(b,2),p=d[0],x=d[1],O=Object(r.useState)(""),g=Object(u.a)(O,2),y=g[0],w=g[1],k=Object(r.useState)("landingPage"),U=Object(u.a)(k,2),T=U[0],F=U[1],P=Object(r.useState)("landingPageContainer"),D=Object(u.a)(P,2),J=D[0],R=D[1],V=Object(r.useState)(!1),E=Object(u.a)(V,2),M=E[0],z=E[1];Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getAll();case 2:t=e.sent,j(t.sort((function(e,t){return t.likes-e.likes})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);a(t),F("dashboard"),R(""),h.setToken(t.token)}}),[]);var H=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.login(t);case 3:n=e.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(n)),a(n),F("dashboard"),R(""),h.setToken(n.token),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(0),x("wrong username or password"),z(!1),w("error"),setTimeout((function(){x(null),w("")}),3e3);case 17:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.create(t);case 3:n=e.sent,j(o.concat(n)),x("a new blog ".concat(n.title," by ").concat(n.author," added")),w("success"),setTimeout((function(){x(null),w("")}),3e3),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),x(e.t0.message),w("error"),setTimeout((function(){x(null),w("")}),3e3);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.register(t);case 3:(n=e.sent).username&&(x("your profile ".concat(n.username," was created successfully, kindly login to continue")),w("success"),setTimeout((function(){x(null),w("")}),5e3),a(null)),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),x("try again"),w("error"),x((function(){x(null),w("")}),3e3);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=o.find((function(e){return e.id===t}))).likes+=1,e.prev=2,e.next=5,h.update(t,n);case 5:r=e.sent,a=o.map((function(e){return e.id!==t?e:r})),j(a.sort((function(e,t){return t.likes-e.likes}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.find((function(e){return e.id===t})),!window.confirm("Remove blog ".concat(n.title," by ").concat(n.author))){e.next=14;break}return e.prev=2,e.next=5,h.remove(t,n);case 5:r=o.filter((function(e){return e.id!==t})),j(r.sort((function(e,t){return t.likes-e.likes}))),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),x(e.t0.message),w("error"),setTimeout((function(){x(null),w("")}),3e3);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:T,children:[Object(f.jsx)(B,{user:n,setUser:a}),Object(f.jsx)(v.a,{className:J,children:Object(f.jsxs)("div",{children:[Object(f.jsx)(S,{notificationMessage:p,notificationClassName:y}),null===n?Object(f.jsx)(C,{handleLogin:H,setUser:a,loadingVisible:M,setLoadingVisible:z}):"newUser"===n?Object(f.jsx)(A,{createUser:K,setUser:a}):Object(f.jsxs)("div",{children:[Object(f.jsx)(L,{handleCreateBlog:q}),o.map((function(e){return Object(f.jsx)(m,{blog:e,updateLikes:function(){return Q(e.id)},deleteBlogs:function(){return W(e.id)}},e.id)}))]})]})}),Object(f.jsx)(I,{})]})};n(75);s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(F,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.cdafd1c7.chunk.js.map